# Vibe Coding Workflow 2.0 - 总览

> 五阶段工程化流程的完整概览。

---

## 流程架构图

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                                                                               ║
║                      VIBE CODING WORKFLOW 2.0                                 ║
║                                                                               ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║   ┌─────────────────────────────────────────────────────────────────────┐    ║
║   │ PHASE 1: DESIGN                                                    │    ║
║   │ 设计阶段                                                            │    ║
║   ├─────────────────────────────────────────────────────────────────────┤    ║
║   │ • Brainstorming: 需求澄清、方案探索                                   │    ║
║   │ • 增量展示设计 (200-300字/段)                                        │    ║
║   │ • 生成设计文档: docs/plans/xxx-design.md                             │    ║
║   │                                                                     │    ║
║   │ 输出: 经过验证的设计文档                                              │    ║
║   │ Agent: vibe-architect                                               │    ║
║   └─────────────────────────────────────────────────────────────────────┘    ║
║                                  ↓ (Level 1 Gate)                             ║
║   ┌─────────────────────────────────────────────────────────────────────┐    ║
║   │ PHASE 2: PREPARATION                                               │    ║
║   │ 准备阶段                                                            │    ║
║   ├─────────────────────────────────────────────────────────────────────┤    ║
║   │ 2a. Environment Setup:                                              │    ║
║   │     • 创建隔离工作区 (.worktrees/)                                   │    ║
║   │     • 运行项目设置 (npm install, etc.)                               │    ║
║   │     • 验证干净基线                                                   │    ║
║   │                                                                     │    ║
║   │ 2b. Plan Writing:                                                   │    ║
║   │     • 拆分为 2-5 分钟粒度的任务                                      │    ║
║   │     • 每个任务: 精确路径 + 完整代码 + 验证命令                         │    ║
║   │     • 生成计划文档: docs/plans/xxx-plan.md                           │    ║
║   │                                                                     │    ║
║   │ 输出: 隔离工作区 + 详细实施计划                                        │    ║
║   │ Agent: vibe-architect                                               │    ║
║   └─────────────────────────────────────────────────────────────────────┘    ║
║                                  ↓ (Level 2 Gate)                             ║
║   ┌─────────────────────────────────────────────────────────────────────┐    ║
║   │ PHASE 3: IMPLEMENTATION                                            │    ║
║   │ 实现阶段                                                            │    ║
║   ├─────────────────────────────────────────────────────────────────────┤    ║
║   │ Mode A: Subagent-Driven (当前会话)                                   │    ║
║   │   • 每个任务派遣新鲜子代理                                            │    ║
║   │   • 严格 TDD: 红 → 绿 → 重构                                        │    ║
║   │   • 双阶段审查: 规格符合性 → 代码质量                                  │    ║
║   │                                                                     │    ║
║   │ Mode B: Executing Plans (并行会话)                                   │    ║
║   │   • 批量执行任务                                                     │    ║
║   │   • 人工检查点                                                       │    ║
║   │                                                                     │    ║
║   │ 输出: 实现所有任务的代码 + 测试                                        │    ║
║   │ Agent: vibe-coder (子代理) + vibe-reviewer (审查)                    │    ║
║   └─────────────────────────────────────────────────────────────────────┘    ║
║                                  ↓ (Level 3 Gate x N)                         ║
║   ┌─────────────────────────────────────────────────────────────────────┐    ║
║   │ PHASE 4: QUALITY                                                   │    ║
║   │ 质量阶段                                                            │    ║
║   ├─────────────────────────────────────────────────────────────────────┤    ║
║   │ 4a. Final Code Review:                                              │    ║
║   │     • 对比计划验证完整性                                              │    ║
║   │     • 架构合规性检查                                                  │    ║
║   │                                                                     │    ║
║   │ 4b. Systematic Testing:                                             │    ║
║   │     • 完整测试套件                                                    │    ║
║   │     • 边界条件测试                                                    │    ║
║   │     • 性能基准测试                                                    │    ║
║   │                                                                     │    ║
║   │ 4c. Documentation Sync:                                             │    ║
║   │     • API 文档更新                                                    │    ║
║   │     • 架构决策记录                                                    │    ║
║   │     • 使用手册                                                        │    ║
║   │                                                                     │    ║
║   │ 输出: 质量报告 + 测试报告 + 更新文档                                    │    ║
║   │ Agent: vibe-reviewer, vibe-debugger, vibe-documenter                │    ║
║   └─────────────────────────────────────────────────────────────────────┘    ║
║                                  ↓ (Level 4 Gate)                             ║
║   ┌─────────────────────────────────────────────────────────────────────┐    ║
║   │ PHASE 5: DELIVERY                                                  │    ║
║   │ 交付阶段                                                            │    ║
║   ├─────────────────────────────────────────────────────────────────────┤    ║
║   │ • 验证所有任务完成                                                    │    ║
║   │ • 最终测试确认                                                        │    ║
║   │ • 提供交付选项: 合并/PR/保留/废弃                                      │    ║
║   │ • 执行交付操作                                                        │    ║
║   │ • 生成交付报告                                                        │    ║
║   │                                                                     │    ║
║   │ 输出: 生产就绪的代码 + 交付报告                                        │    ║
║   │ Agent: vibe-architect                                               │    ║
║   └─────────────────────────────────────────────────────────────────────┘    ║
║                                                                               ║
║                                  交付完成                                      ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

---

## 流程入口

### 入口 1: 完整流程
```bash
[vibe-coding] 我需要开发一个[项目描述]...
```
**执行**: Phase 1 → 2 → 3 → 4 → 5
**时间**: 2-4 小时
**产出**: 生产就绪代码

### 入口 2: 仅设计
```bash
[vibe-coding:design] 设计一个[系统/功能]...
```
**执行**: Phase 1  only
**时间**: 30-60 分钟
**产出**: 设计文档

### 入口 3: 从设计到计划
```bash
[vibe-coding:plan] 基于 docs/plans/xxx-design.md 创建实施计划
```
**执行**: Phase 2 only
**时间**: 30-60 分钟
**产出**: 隔离环境 + 计划文档

### 入口 4: 快速原型
```bash
[vibe-coding:quick] 快速做一个[原型]...
```
**执行**: Phase 1 (简化) → Phase 3 (简化)
**时间**: 30-60 分钟
**产出**: 可运行原型

### 入口 5: 单个 Agent
```bash
[vibe-architect] 架构设计...
[@vibe-coder] 实现功能...
[@vibe-reviewer] 审查代码...
[@vibe-debugger] 调试问题...
[@vibe-documenter] 生成文档...
```
**执行**: 对应 Agent 的特定职责
**时间**: 视任务而定

---

## 流程特点

### 1. 工程化严谨
- **设计先行**: 不验证设计不编码
- **计划详细**: 2-5 分钟粒度任务
- **TDD 强制**: 红-绿-重构铁律
- **双阶段审查**: 规格+质量双重保障

### 2. 质量门禁
- **四级门禁**: 设计→计划→代码→集成
- **逐级通过**: 每级必须完全通过
- **问题分级**: Critical/Important/Suggestion
- **循环修复**: 未通过则修复重审

### 3. 可观测性
- **文档化**: 每个阶段生成文档
- **可追溯**: 设计→计划→代码→测试链路
- **可度量**: 通过率、审查轮数等指标

### 4. 灵活性
- **多入口**: 支持不同起始点
- **多模式**: 子代理驱动或计划执行
- **可中断**: 检查点允许人工介入

---

## 详细文档索引

| 文档 | 内容 | 位置 |
|------|------|------|
| 流程总览 | 本文档 | `workflows/workflow-overview.md` |
| Phase 1 详情 | 设计阶段详细流程 | `workflows/phase-1-design.md` |
| Phase 2 详情 | 准备阶段详细流程 | `workflows/phase-2-preparation.md` |
| Phase 3 详情 | 实现阶段详细流程 | `workflows/phase-3-implementation.md` |
| Phase 4 详情 | 质量阶段详细流程 | `workflows/phase-4-quality.md` |
| Phase 5 详情 | 交付阶段详细流程 | `workflows/phase-5-delivery.md` |
| 核心原则 | 五大铁律 | `principles.md` |
| 质量门禁 | 四级门禁检查点 | `quality-gates.md` |
| Agent 定义 | 各 Agent 详细定义 | `agents/*.md` |

---

## 快速参考

### 触发词速查

| 触发词 | 作用 |
|--------|------|
| `[vibe-coding]` | 完整五阶段流程 |
| `[vibe-coding:design]` | 仅设计阶段 |
| `[vibe-coding:plan]` | 仅准备阶段 |
| `[vibe-coding:quick]` | 快速原型 |
| `[vibe-architect]` | 架构设计/流程协调 |
| `[@vibe-coder]` | 代码实现 (TDD) |
| `[@vibe-reviewer]` | 双阶段审查 |
| `[@vibe-debugger]` | 系统化调试 |
| `[@vibe-documenter]` | 文档生成 |
| `[@security-advisor]` | 安全审查 |

### 文档路径约定

```
docs/plans/
├── YYYY-MM-DD-<feature>-design.md    # 设计文档
├── YYYY-MM-DD-<feature>-plan.md      # 计划文档
└── README.md                          # 计划文档索引
```

### 工作区约定

```
.worktrees/
└── <branch-name>/          # 隔离工作区
    ├── src/                # 源代码
    ├── tests/              # 测试
    └── docs/               # 文档
```

---

**最后更新**: 2026-01-30
**版本**: v2.0
